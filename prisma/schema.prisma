generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id              String        @id @default(uuid()) @db.Uuid
  username        String
  hashedPassword  String        @map("hashed_password")
  publicKey       String?       @map("public_key")
  userProfile     UserProfile?
  //sentFriendRequest     FriendList[] @relation("RequestingUser")
  //receivedFriendRequest     FriendList[] @relation("BefriendedUser")
  userBlocker     BlockedList[] @relation("UserBlocker")
  blockedFromUser BlockedList[] @relation("UserBlocked")

  @@map("user_account")
}

model UserProfile {
  user        User      @relation(fields: [userId], references: [id])
  userId      String    @id @map("user_id") @db.Uuid
  name        String?   @db.VarChar(32)
  surname     String?   @db.VarChar(32)
  description String?   @db.VarChar(512)
  birthDate   DateTime? @map("birth_date") @db.Date

  @@map("user_profile")
}

/**
 * model FriendList {
 * user             User   @relation("RequestingUser", fields: [requestingUserId], references: [id])
 * requestingUserId String @map("user_id") @db.Uuid
 * user2            User   @relation("BefriendedUser", fields: [befriendedUserId], references: [id])
 * befriendedUserId String @map("befriended_user_id") @db.Uuid
 * @@id([requestingUserId, befriendedUserId])
 * @@map("friend_list")
 * }
 */

model BlockedList {
  user          User   @relation("UserBlocker", fields: [blockerUserId], references: [id])
  blockerUserId String @map("user_id") @db.Uuid
  user2         User   @relation("UserBlocked", fields: [blockedUserId], references: [id])
  blockedUserId String @map("blocked_user_id") @db.Uuid

  @@id([blockerUserId, blockedUserId])
  @@map("blocked_list")
}

model Chat {
}

model ChatParticipation {
}

model ChatDeletion {
}

model Message {
}

model Image {
}

enum Status {
  ONLINE
  OFFLINE
}

enum ChatType {
  CHAT
  GROUP_CHAT
}
